<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>恋愛パーソナリティ自己診断</title>
  <style>
/* ===============================================================
   1. 使用 Google Font（繁體中文推薦：Noto Sans TC）
   =============================================================== */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');

/* ===============================================================
   2. 全局設定
   =============================================================== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  font-family: 'Noto Sans TC', sans-serif;
  background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
  color: #333;
  padding: 20px;
  line-height: 1.6;
}

/* ===============================================================
   3. 標題樣式
   =============================================================== */
h1 {
  text-align: center;
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 40px;
  color: #1a202c;
}

/* ===============================================================
   4. 問卷容器：設定最大寬度、置中
   =============================================================== */
#questionsContainer {
  max-width: 800px;
  margin: 0 auto;
}

/* ===============================================================
   5. 單題卡片（Card）樣式
   =============================================================== */
.question {
  background: #ffffff;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.05);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  position: relative;
}
.question:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 16px rgba(0,0,0,0.08);
}
.question strong {
  display: block;
  font-size: 1.1rem;
  margin-bottom: 10px;
  color: #1a202c;
}

/* ===============================================================
   6. 選項區塊樣式
   =============================================================== */
.option-group {
  margin-left: 20px;
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
}
.option-group label {
  background: #f1f5f9;
  border-radius: 8px;
  padding: 8px 12px;
  margin-right: 12px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
  display: flex;
  align-items: center;
  font-size: 0.95rem;
  color: #434343;
}
.option-group label:hover {
  background: #e2e8f0;
}
.option-group input[type="radio"] {
  margin-right: 6px;
  accent-color: #4c51bf; /* Chrome/Edge 皆可控制 radio 顏色 */
}

/* ===============================================================
   7. 提交按鈕樣式
   =============================================================== */
button {
  display: block;
  margin: 30px auto;
  padding: 12px 32px;
  font-size: 1rem;
  font-weight: 600;
  border: none;
  border-radius: 30px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(118, 75, 162, 0.3);
  transition: background 0.3s ease, transform 0.2s ease;
}
button:hover {
  background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
  transform: translateY(-2px);
}

/* ===============================================================
   8. 結果區塊樣式
   =============================================================== */
#result {
  max-width: 800px;
  margin: 40px auto 0;
}
.result-block {
  background: #ffffff;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.05);
}
.result-block strong {
  display: block;
  font-size: 1.2rem;
  margin-bottom: 15px;
  color: #1a202c;
}
.result-block ol {
  padding-left: 20px;
}
.result-block li {
  margin-bottom: 15px;
}
.personality-title {
  font-size: 1.05rem;
  font-weight: 700;
  color: #4c51bf;
}
.personality-desc {
  font-size: 0.95rem;
  color: #555;
  margin-left: 20px;
  margin-top: 4px;
}

/* ===============================================================
   9. 手機響應式 (小螢幕) 調整
   =============================================================== */
@media (max-width: 600px) {
  body {
    padding: 10px;
  }
  h1 {
    font-size: 1.6rem;
    margin-bottom: 25px;
  }
  .question {
    padding: 15px;
  }
  .question strong {
    font-size: 1rem;
  }
  .option-group label {
    flex: 1 1 45%;
    padding: 6px 10px;
    font-size: 0.9rem;
  }
  button {
    padding: 10px 24px;
    font-size: 0.95rem;
  }
  .result-block {
    padding: 20px;
  }
  .personality-title {
    font-size: 1rem;
  }
  .personality-desc {
    font-size: 0.9rem;
  }
}

  </style>
</head>
<body onload="renderQuestions()">
  <h1>恋愛パーソナリティ自己診断</h1>

  <p style="max-width: 800px; margin: 0 auto 30px; line-height: 1.8; font-size: 1rem; text-align: justify;">
    この簡易質問シートは、あなたのパーソナリティのタイプを知るためのものです。<br/>
各質問に、よく当てはまる、当てはまる、どちらとも言えない、当てはまらない のいずれかで答えてください。<br/>
現時点のあなたの気分や行動だけでなく、過去数年間、あなたがどんなふうに感じ、行動していたかを振り返りながら、もっとも当てはまるものを選んでください。<br/>
  </p>

  <form id="quizForm">
    <div id="questionsContainer">
      <!-- 這裡由 JavaScript 動態填入 90 個問題 -->
    </div>

    <button type="button" onclick="calculateScore()">提出</button>
  </form>

  <div id="result"></div>

  <script>
    // ─── 1. 問題陣列 (90題) ─────────────────────────────────────────
    const questions = [
      // 回避型（Avoidant）
      "断られたり、けなされたりすると、傷つくので、人付き合いの多い仕事には就きたくない。",
      "自分に好感をもっていない人とは、あまり関わりたくない。",
      "嫌われたらいけないので、親しい人とも、自分を抑えて付き合うほうだ。",
      "馬鹿にされたり、仲間はずれにされないか、いつも不安である。",
      "人に会ったり、出かける約束を、直前になってキャンセルすることがよくある。",
      "どうせ自分には魅力がないので、あまり人に好かれないのではと思う。新しいことをしようとすると、うまくいかないのではと不安になって、実行しないうちに諦めてしまうことがよくある。",
      "水着を着たり、体が相手と接触したりするのは、あまり好きではない。",
      "面と向かいあって喋るのは、苦手である。",
      "自分の気持ちや感覚を表現するのは、恥ずかしくて苦手だ。",
      
      // 依存型（Dependent）
      "細かなことも、自分だけでは決められないほうだ。",
      "肝心なことや面倒なことは、人にやってもらうことが多い。",
      "頼まれると、イヤと言えず、つい応じてしまう。",
      "ものごとを自分で計画して、率先してやるよりも、人の後からついていくほうが性に合っている。",
      "相手によく思われようと、本当はやりたくないことまでもやってしまうことがある。",
      "自分一人では、生きていく自信がない。",
      "恋人や友人と別れると、すぐ代わりの人を求めるほうだ。",
      "誰にでもいい顔をして、外面が良いところがある。",
      "良くないとわかっていても、相手が可哀想になって、つい甘くなってしまうことがある。",
      "人にサービスしたり、喜んでもらうことが好きである。",
      
      // 強迫型（Obsessive–Compulsive）
      "細かいところにこだわりすぎてしまう。",
      "完璧にやろうとして、時間が足りなくなってしまうことがよくある。",
      "仕事や勉強に打ち込むあまり、娯楽や人付き合いは二の次になりがちだ。",
      "不正やいい加減なことに対しては、許せないほうだ。",
      "役に立たないとわかっていても、捨てるのは苦手である。",
      "自分の言う通りにしない人とは、うまくやっていけない。",
      "お金はなるべく節約して、将来のために貯金している。",
      "頑固で妥協ができないところがある。",
      "損得よりも、義理や責任、体面を重んじる。",
      "礼儀正しく、堅苦しいところがある。",
      
      // 自己愛型（Narcissistic）
      "自分には、世間の人が気づいていない才能や優れた点があると思う。",
      "大成功をして有名になったり、理想の恋人と出会うことを夢見ている。",
      "自分は人とは違ったところがあり、特別な人間だと思う。",
      "周囲から賞賛されることが大好きで、批判されると憤慨する。",
      "多少の無理でも、自分の望むことは、大抵聞いてもらえることが多かった。",
      "ほしいものを手に入れるためなら、他の人を利用したり、うまく言いくるめるくらいの自信はある。",
      "自分勝手で思いやりがないところがある。",
      "友人や知り合いの幸せを見ると、内心妬ましくなることがある。",
      "態度が大きいとか、プライドが高いと思われている。",
      "利用価値のないものには、冷淡である。",
      
      // 反社会型（Antisocial）
      "違法なことを繰り返してしまったことがある。",
      "自分の利益や快楽のために、人を騙したことがある。",
      "場当たり的で、将来よりも、そのときが良ければいいというところがある。",
      "すぐに手が出たり、暴力に訴えてしまう。",
      "危険に無頓着で、命知らずなところがある。",
      "仕事をすぐに辞めたり、借金を返さないことがある。",
      "冷酷なことを衝動的にしてしまうことがある。",
      "ハラハラするようなことをするのが好きだ。",
      "膨病者と思われようが、戦うことを選ぶ。",
      "安全で平凡な日常よりも、刺激と冒険に満ちた人生を愛する。",
      
      // 境界型（Borderline）
      "大切な人に捨てられるのではと不安になって、必死にしがみついたり、そうさせまいとして相手を困らせたことがある。",
      "相手を理想的な人だと思ったり、ひどく幻滅したりの落差が激しいほうだ。",
      "自分が本当はどんな人間なのか、わからなくなることがある。",
      "衝動的に、危険なことや良くないことをやってしまうことがある。",
      "自殺しようとしたり、そうすると言って、周囲を困らせたことがある。",
      "一日のうちでも、気分が両極端に変わることがある。",
      "いつも心のどこかに、空虚な感じがある。",
      "些細なことでも、思い通りにならないと、激しい怒りにとらわれることがある。",
      "思い込みにとらわれたり、記憶が飛ぶことがある。",
      "自分は余り価値のない人間だと思ってしまう。",
      
      // 演技性型（Histrionic）
      "みんなの関心や注目の的になっているのが好きだ。",
      "異性の注意をひいたりするのは、巧いほうだ。",
      "気まぐれで、移り気なところがある。",
      "外見やファッションには、かなり凝るほうだ。",
      "話が上手で、「一緒にいると楽しい」と言われる。",
      "自分の気持ちを、表情や身振り豊かに表現するほうだ。",
      "相手の態度やその場の雰囲気に影響されやすい。",
      "知り合いになると、すぐ気安く話ができるほうだ。",
      "本のようなウソをついて、相手を信じさせるのが巧い。",
      "身のこなしが様になっていて、魅力的である。",
      
      // 内向型（Schizoid）
      "孤独のほうが好きなので、誰とも親密な関係をもちたいとは思わない。",
      "自分一人で行動するほうが合っている。",
      "場違いな反応をしたり、ズレていると言われることがある。",
      "変わり者だとかマニアックだとか言われることがある。",
      "一方的に喋ることがある。",
      "決まり切ったやり方や特定のものにこだわりが強い。",
      "興味のある領域には、ものすごく知識がある。",
      "人を相手にするよりも、モノを相手にするほうが性に合っている。",
      "他人がどう思おうと、余り気にしない。",
      "喜怒哀楽が余りなく、いつも冷静なほうだ。",
      
      // 猜疑心型（Paranoid）
      "他人は油断がならないものだと思う。",
      "友達や仲間といえども、信じられないときがある。",
      "自分の秘密やプライベートなことは、他人には言わないほうだ。",
      "他人の言葉に、よく傷つけられることがある。",
      "傷つけられたり、恨みに思ったことは、長く忘れないほうだ。",
      "当てこすられたり、非難されたり、怒りがこみ上げてくる。",
      "配偶者や恋人が、隠れて裏切っているのではないかと疑うことがある。",
      "言外の意味を邪推してしまうことがある。",
      "相手が約束を破ったり言葉を違えたりすると許せない。",
      "自分のことを悪く言われているように思うことが、よくある。"
    ];


    // ─── 2. 四個選項分數 (非常符合=2、符合=1、不清楚&不符合=0) ───
    const optionLabels = ["よく当てはまる", "当てはまる", "どちらとも言えない", "当てはまらない"];
    const optionValues = [2, 1, 0, 0];

    // ─── 3. 對應「區塊→人格類型名稱→簡介」 ────────────────────────────
    const personalityMap = [
      { name: "回避型",    desc: "どうせ無理だとあきらめる" },
      { name: "依存型",    desc: "相手に合わせて尽くしてしまう"},
      { name: "強迫型",    desc: "義務と責任に縛られる" },
      { name: "自己愛型",  desc: "自分が主役じゃないと面白くない" },
      { name: "反社会型",  desc: "危険なスリルを求める" },
      { name: "境界型",    desc: "確かな愛が感じられない" },
      { name: "演技性型",  desc: "魔性の魅力で誘惑する" },
      { name: "アスペルガー型", desc: "自分の世界に熱中する" },
      { name: "妄想型",    desc: "誰も信じられない" }
    ];
    /**
     * renderQuestions():
     *   在 body onload 時呼叫，將 90 題動態填入 <div id="questionsContainer">
     */
    function renderQuestions() {
      const container = document.getElementById("questionsContainer");
      container.innerHTML = "";  // 先清空
      questions.forEach((q, i) => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `
          <strong>Q${i + 1}：</strong> ${q}
          <div class="option-group">
            ${optionLabels.map((label, idx) =>
              `<label>
                <input type="radio" name="q${i}" value="${optionValues[idx]}"> ${label}
              </label>`
            ).join("")}
          </div>
        `;
        container.appendChild(div);
      });
    }

    /**
     * calculateScore():
     *   1. 檢查每一題是否都有選項，若有題目沒選則 alert 提示並中止
     *   2. 計算每 10 題一組的總分，得到 9 個分數
     *   3. 根據分數高低排序，取前三名，並顯示「類型名稱 + 簡介」
     */
    function calculateScore() {
      const form = document.forms["quizForm"];
      const scores = new Array(9).fill(0);
      let incomplete = false;

      // 1. 驗證：每一題是否都有勾選
      for (let i = 0; i < questions.length; i++) {
        const radios = form[`q${i}`];
        let selected = false;

        if (radios && radios.length) {
          for (let r of radios) {
            if (r.checked) {
              selected = true;
              // 把該題分數加到「第 floor(i/10) 組」
              scores[Math.floor(i / 10)] += parseInt(r.value);
              break;
            }
          }
        }
        if (!selected) {
          alert(`請回答第 ${i + 1} 題`);
          incomplete = true;
          break;
        }
      }
      if (incomplete) return;

      // 2. 構造九組結果 { name, desc, score }
      const results = scores.map((score, idx) => ({
        name: personalityMap[idx].name,
        desc: personalityMap[idx].desc,
        score
      }));

    // 過濾掉分數為 0 的人格
    const nonZeroResults = results.filter(r => r.score > 0);

    // 分數由高到低排序
    nonZeroResults.sort((a, b) => b.score - a.score);

    // 根據分數分組
    const grouped = {};
    nonZeroResults.forEach(r => {
      if (!grouped[r.score]) grouped[r.score] = [];
      grouped[r.score].push(r);
    });

    // 取得依照分數遞減排序的 score 群組
    const scoreGroups = Object.keys(grouped)
      .map(score => parseInt(score))
      .sort((a, b) => b - a);

    // 分類
    const main = grouped[scoreGroups[0]];
    const secondary = scoreGroups.length > 1 ? grouped[scoreGroups[1]] : [];
    const others = scoreGroups.slice(2).flatMap(score => grouped[score]);

    // 顯示
    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML = `
      <div class="result-block">
        <strong>第一のパーソナリティ：</strong>
        <ul>
          ${main.map(r => `
            <li>
              <span class="personality-title">${r.name}：${r.score} 分</span>
              <div class="personality-desc">${r.desc}</div>
            </li>
          `).join("")}
        </ul>
      </div>

      ${secondary.length > 0 ? `
      <div class="result-block">
        <strong>補助的なパーソナリティ：</strong>
        <ul>
          ${secondary.map(r => `
            <li>
              <span class="personality-title">${r.name}：${r.score} 分</span>
              <div class="personality-desc">${r.desc}</div>
            </li>
          `).join("")}
        </ul>
      </div>
      ` : ""}

      ${others.length > 0 ? `
      <div class="result-block">
        <strong>その他のパーソナリティ：</strong>
        <ul>
          ${others.map(r => `
            <li>
              <span class="personality-title">${r.name}：${r.score} 分</span>
              <div class="personality-desc">${r.desc}</div>
            </li>
          `).join("")}
        </ul>
      </div>
      ` : ""}
          <div style="max-width: 800px; margin: 30px auto 0; font-size: 0.9rem; color: #666; line-height: 1.6;">
      <strong>參考資料：</strong><br/>
      《<a href="https://www.amazon.co.jp/%E3%81%AA%E3%81%9C%E3%81%84%E3%81%A4%E3%82%82%E2%80%9C%E4%BC%BC%E3%81%9F%E3%82%88%E3%81%86%E3%81%AA%E4%BA%BA-%E3%82%92%E5%A5%BD%E3%81%8D%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%AE%E3%81%8B-%E5%B2%A1%E7%94%B0%E5%B0%8A%E5%8F%B8/dp/4413039262">なぜいつも似たような人を好きになるのか<br/>
      作者：岡田尊司
    </div>
    `;
    }
  </script>
</body>
</html>
